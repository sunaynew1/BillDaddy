<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tailwind Loading + Success + Error Popup</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer>
    function showLoading() {
      document.getElementById("loadingPopup").classList.remove("hidden");
    }

    function hideLoading() {
      document.getElementById("loadingPopup").classList.add("hidden");
    }

    function showToast(type, message) {
      const toast = document.getElementById("toast");
      const icon = document.getElementById("toastIcon");
      const text = document.getElementById("toastText");

      // Set message
      text.textContent = message;

      // Set styling based on type
      if (type === "success") {
        toast.className = baseToastClass + " bg-green-500 text-white";
        icon.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>`;
      } else if (type === "error") {
        toast.className = baseToastClass + " bg-red-500 text-white";
        icon.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>`;
      }

      // Show and auto-hide
      toast.classList.remove("hidden");
      setTimeout(() => toast.classList.add("hidden"), 3000);
    }

    const baseToastClass = "fixed top-5 right-5 z-50 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 animate-fade-in";

    async function sendFakeRequest(success = true) {
      showLoading();

      try {
        // Simulate network delay
        await new Promise((resolve) => setTimeout(resolve, 2000));

        if (!success) throw new Error("Simulated API failure");

        showToast("success", "Request successful!");
      } catch (err) {
        showToast("error", "Request failed: " + err.message);
      } finally {
        hideLoading();
      }
    }
  </script>
</head>
<body class="bg-gray-100 h-screen flex flex-col gap-4 items-center justify-center font-sans">

  <!-- Buttons to Test -->
  <button onclick="sendFakeRequest(true)" class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-md transition">
    Send Successful Request
  </button>

  <button onclick="sendFakeRequest(false)" class="px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl shadow-md transition">
    Send Failed Request
  </button>

  <!-- Loading Overlay -->
  <div id="loadingPopup" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
    <div class="bg-white text-gray-800 px-6 py-4 rounded-2xl shadow-2xl flex items-center space-x-3">
      <svg class="animate-spin h-6 w-6 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path>
      </svg>
      <span class="text-lg font-medium">Loading, please wait...</span>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="hidden">
    <div id="toastIcon"></div>
    <span id="toastText" class="text-sm font-medium">Message</span>
  </div>

  <!-- Custom Animations -->
  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(-10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .animate-fade-in {
      animation: fade-in 0.3s ease-out;
    }
  </style>

</body>
</html>
